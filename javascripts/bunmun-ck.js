/*
 * Linkify jQuery Plugin v1.0.0
 *
 * Copyright (c) 2011 Dobot (http://dobot.github.com/)
 * Licensed under the MIT license.
 *
 */(function(e){e.extend({linkify:function(t,n){var r={link:{regex:/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,template:'<a href="$1">$1</a>'},user:{regex:/((?:^|[^a-zA-Z0-9_!#$%&*@＠]|RT:?))([@＠])([a-zA-Z0-9_]{1,20})(\/[a-zA-Z][a-zA-Z0-9_-]{0,24})?/g,template:'$1<a href="http://twitter.com/#!/$3$4">@$3$4</a>'},hash:{regex:/(^|\s)#(\w+)/g,template:'$1<a href="http://twitter.com/#!/search?q=%23$2">#$2</a>'},email:{regex:/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi,template:'<a href="mailto:$1">$1</a>'}},i=e.extend(r,n);e.each(i,function(e,n){t=t.replace(n.regex,n.template)});return t}})})(jQuery);BUNMUN={pageLoad:function(){BUNMUN.TwitterLinks();BUNMUN.RoleDescriptions()},RoleDescriptions:function(){var e=new Array,t=0;$(".role-button").each(function(){var n=$(this).attr("data-image"),r=new Image;r.src="images/"+n;e.push(r);$(this).attr("data-number",t);t++});var n=$(".buttonList").height(),r=$(".role-button:first-child").position().top;console.log("Height of list: "+n);console.log("List Position: "+r);$(".role-button").click(function(t){t.preventDefault();if($(this).is(":not(.selected)")){var n=$(this).attr("data-role");$(".role-descriptions .description").slideUp();$(".description[data-role='"+n+"']").slideDown();$(".role-button.selected").removeClass("selected");$(this).addClass("selected");var i=$(this).attr("data-number"),s=e[i].src,o=$(this).attr("data-image-size"),u=$(this).attr("data-image-pos");$("#Intro").css({backgroundImage:"url("+s+")",backgroundOrigin:"content-box",backgroundSize:o,backgroundRepeat:"no-repeat",backgroundPosition:u});var a=$("#Intro");$("html,body").animate({scrollTop:a.offset().top},500);var f=$(this).position().top;console.log("Role Position Top: "+f);var l=r-f;console.log("relativePos: "+l);$(".buttonList").css({top:l});$(".role-button:not(.selected)").css("visibility","hidden")}else{var c=$(".role-button").filter(function(){return $(this).css("visibility")!=="hidden"}).length;console.log("Visible Count: "+c);c>1?$(".role-button:not(.selected)").css("visibility","hidden"):$(".role-button").css("visibility","visible")}});$(".expand").toggle(function(){$(".role-button").css("visibility","visible")},function(){$(".role-button:not(.selected)").css("visibility","hidden")})},tallestChild:function(e){var t=0;$(e).children().each(function(){var e=$(this).height();e>t&&(t=e)});return t},equalHeights:function(e){var t=BUNMUN.tallestChild(e);$(e).children().each(function(){$(this).height(t)})},getLatestTweet:function(){$.getJSON("../Bunmun_Foundation/php/TwitterSettingsEcho.php",function(e){$.each(e,function(t){var n=$.linkify(e[t].text),r="<li><p>"+n+"</p><time datetime='"+e[t].created_at+"'>"+BUNMUN.TwitterDateConverter(e[t].created_at)+"</time><span><a class='tweet_reply' title='Reply' href='https://twitter.com/intent/tweet?in_reply_to="+e[t].id_str+"'>Reply</a><a class='tweet_retweet' title='Retweet' href='https://twitter.com/intent/retweet?tweet_id="+e[t].id_str+"'>Retweet</a><a class='tweet_fave' title='Favorite' href='https://twitter.com/intent/favorite?tweet_id="+e[t].id_str+"'>Favorite</a></span></li>";$("#Twitter .posts").append(r)});BUNMUN.equalHeights("#Social .row")})},TwitterLinks:function(){$(".tweetContent p").each(function(){var e=$.linkify($(this).text());$(this).html(e)})},TwitterDateConverter:function(e){var t=new Date(e),n=((new Date).getTime()-t.getTime())/1e3,r=Math.floor(n/86400);if(isNaN(r)||r<0||r>=31)return;return r==0&&(n<60&&"just now"||n<120&&"1 minute ago"||n<3600&&Math.floor(n/60)+" minutes ago"||n<7200&&"1 hour ago"||n<86400&&Math.floor(n/3600)+" hours ago")||r==1&&"Yesterday"||r<7&&r+" days ago"||r<31&&Math.ceil(r/7)+" weeks ago"},parseBlogRSS:function(e,t,n){var r=!1;t==="Tumblr"&&(r=!0);$.jGFeed(e,function(e){$("#"+t+" h2.blogTitle").html(e.title);var i="";for(var s=0;s<n;s++){var o=new Date(e.entries[s].publishedDate);i='<li class="post"><a class="block" href="'+e.entries[s].link+'" target="_blank"><time datetime="'+e.entries[s].publishedDate+'">'+o.getMonth()+"."+o.getDate()+"."+o.getFullYear()+"</time><h6>"+e.entries[s].title+"</h6>";r?i+=e.entries[s].content:i+="</a></li>";$("#"+t+" .posts").append(i);if(r){$("#"+t+" .posts .block img").addClass("tumblrImg");$(".tumblrImg").each(function(){var e=$(this).attr("src");$(this).closest(".post").css("background","url("+e+") no-repeat 50% 50%");$(this).remove()});$("#"+t+" .posts .block p").remove()}}})}};